/*! For license information please see contentScript.bundle.js.LICENSE.txt */
(()=>{var t={213:(t,r,e)=>{var n,i,a,o;function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}t=e.nmd(t),self,o=function(){return function(){"use strict";var t={132:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.bezkrovnySsim=void 0;var n=e(490),i=e(971);function a(t,r,e){var i=t.data,a=r.data,o=e.bitDepth,d=e.k1,u=e.k2,h=Math.pow(2,o)-1,c=Math.pow(d*h,2),f=Math.pow(u*h,2),l=n.average(i),s=n.average(a),v=n.variance(i,l),g=n.variance(a,s);return(2*l*s+c)*(2*n.covariance(i,a,l,s)+f)/((Math.pow(l,2)+Math.pow(s,2)+c)*(v+g+f))}r.bezkrovnySsim=function(t,r,e){for(var n=e.windowSize,o=Math.ceil(t.width/n),d=Math.ceil(t.height/n),u=new Array(o*d),h=0,c=0;c<t.height;c+=n)for(var f=0;f<t.width;f+=n){var l=Math.min(n,t.width-f),s=Math.min(n,t.height-c),v=i.sub(t,f,s,c,l),g=i.sub(r,f,s,c,l);u[h++]=a(v,g,e)}return{data:u,width:o,height:d}}},63:function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.defaults=void 0,r.defaults={windowSize:11,k1:.01,k2:.03,bitDepth:8,downsample:"original",ssim:"weber",maxSize:256,rgb2grayVersion:"integer"}},441:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.downsample=void 0;var n=e(490),i=e(971);function a(t,r,e){var n=i.imfilter(t,r,"symmetric","same");return i.skip2d(n,[0,e,n.height],[0,e,n.width])}r.downsample=function(t,r){return"original"===r.downsample?function(t,r,e){void 0===e&&(e=256);var o=Math.min(t.width,r.height)/e,d=Math.round(o);if(d>1){var u=i.ones(d);t=a(t,u=n.divide2d(u,n.sum2d(u)),d),r=a(r,u,d)}return[t,r]}(t[0],t[1],r.maxSize):t}},607:function(t,r,e){var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var i in r=arguments[e])Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);return t}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.ssim=r.getOptions=void 0;var i=e(971),a=e(490),o=e(773),d=e(595),u=e(132),h=e(441),c=e(63),f=e(535),l={fast:o.ssim,original:d.originalSsim,bezkrovny:u.bezkrovnySsim,weber:f.weberSsim};function s(t){var r=n(n({},c.defaults),t);return function(t){if(Object.keys(t).forEach((function(t){if(!(t in c.defaults))throw new Error('"'+t+'" is not a valid option')})),"k1"in t&&("number"!=typeof t.k1||t.k1<0))throw new Error("Invalid k1 value. Default is "+c.defaults.k1);if("k2"in t&&("number"!=typeof t.k2||t.k2<0))throw new Error("Invalid k2 value. Default is "+c.defaults.k2);if(!(t.ssim in l))throw new Error("Invalid ssim option (use: "+Object.keys(l).join(", ")+")")}(r),r}function v(t,r,e){var n,o,d,u,c=(new Date).getTime(),f=function(t){var r=t[0],e=t[1],n=t[2];return l[n.ssim](r,e,n)}(function(t){var r=t[0],e=t[1],n=t[2],i=h.downsample([r,e],n);return[i[0],i[1],n]}((n=function(t){var r=t[0],e=t[1],n=t[2];if(r.width!==e.width||r.height!==e.height)throw new Error("Image dimensions do not match");return[r,e,n]}([t,r,s(e)]),o=n[0],d=n[1],"original"===(u=n[2]).rgb2grayVersion?[i.rgb2gray(o),i.rgb2gray(d),u]:[i.rgb2grayInteger(o),i.rgb2grayInteger(d),u])));return{mssim:void 0!==f.mssim?f.mssim:a.mean2d(f),ssim_map:f,performance:(new Date).getTime()-c}}r.getOptions=s,r.ssim=v,r.default=v},490:function(t,r){function e(t){return n(t)/t.length}function n(t){for(var r=0,e=0;e<t.length;e++)r+=t[e];return r}function i(t){for(var r=t.data,e=0,n=0;n<r.length;n++)e+=r[n];return e}function a(t,r){for(var e=t.data,n=t.width,i=t.height,a=new Array(e.length),o=0;o<e.length;o++)a[o]=e[o]+r;return{data:a,width:n,height:i}}function o(t,r){return"number"==typeof r?function(t,r){for(var e=t.data,n=t.width,i=t.height,a=new Array(e.length),o=0;o<e.length;o++)a[o]=e[o]*r;return{data:a,width:n,height:i}}(t,r):function(t,r){for(var e=t.data,n=t.width,i=t.height,a=r.data,o=new Array(e.length),d=0;d<e.length;d++)o[d]=e[d]*a[d];return{data:o,width:n,height:i}}(t,r)}Object.defineProperty(r,"__esModule",{value:!0}),r.covariance=r.variance=r.mean2d=r.square2d=r.multiply2d=r.divide2d=r.subtract2d=r.add2d=r.sum2d=r.floor=r.sum=r.average=void 0,r.average=e,r.sum=n,r.floor=function(t){for(var r=new Array(t.length),e=0;e<t.length;e++)r[e]=Math.floor(t[e]);return r},r.sum2d=i,r.add2d=function(t,r){return"number"==typeof r?a(t,r):function(t,r){for(var e=t.data,n=t.width,i=t.height,a=r.data,o=new Array(e.length),d=0;d<i;d++)for(var u=d*n,h=0;h<n;h++)o[u+h]=e[u+h]+a[u+h];return{data:o,width:n,height:i}}(t,r)},r.subtract2d=function(t,r){return"number"==typeof r?a(t,-r):function(t,r){for(var e=t.data,n=t.width,i=t.height,a=r.data,o=new Array(e.length),d=0;d<i;d++)for(var u=d*n,h=0;h<n;h++)o[u+h]=e[u+h]-a[u+h];return{data:o,width:n,height:i}}(t,r)},r.divide2d=function(t,r){return"number"==typeof r?function(t,r){for(var e=t.data,n=t.width,i=t.height,a=new Array(e.length),o=0;o<e.length;o++)a[o]=e[o]/r;return{data:a,width:n,height:i}}(t,r):function(t,r){for(var e=t.data,n=t.width,i=t.height,a=r.data,o=new Array(e.length),d=0;d<e.length;d++)o[d]=e[d]/a[d];return{data:o,width:n,height:i}}(t,r)},r.multiply2d=o,r.square2d=function(t){return o(t,t)},r.mean2d=function(t){return i(t)/t.data.length},r.variance=function(t,r){void 0===r&&(r=e(t));for(var n=0,i=t.length;i--;)n+=Math.pow(t[i]-r,2);return n/t.length},r.covariance=function(t,r,n,i){void 0===n&&(n=e(t)),void 0===i&&(i=e(r));for(var a=0,o=t.length;o--;)a+=(t[o]-n)*(r[o]-i);return a/t.length}},687:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.conv2=void 0;var n=e(490),i=e(298),a=e(118),o=e(799);function d(t,r,e){var n=t.data,i=t.width,a=t.height;void 0===e&&(e="full");for(var d=i+r.width-1,u=a+r.height-1,h=o.zeros(u,d).data,f=0;f<r.height;f++)for(var l=0;l<r.width;l++){var s=r.data[f*r.width+l];if(s)for(var v=0;v<a;v++)for(var g=0;g<i;g++)h[(v+f)*d+g+l]+=n[v*i+g]*s}return c({data:h,width:d,height:u},e,a,r.height,i,r.width)}function u(t,r,e){var a=r.data,o=r.width,d=r.height;void 0===e&&(e="full");var u=h(t,i.ones(d,1),i.ones(1,o),e);return n.multiply2d(u,a[0])}function h(t,r,e,n){void 0===n&&(n="full");var i=Math.max(r.height,r.width),a=Math.max(e.height,e.width),o=d(t,r,"full");return c(d(o,e,"full"),n,t.height,i,t.width,a)}function c(t,r,e,n,i,o){if("full"===r)return t;if("same"===r){var d=Math.ceil((t.height-e)/2),u=Math.ceil((t.width-i)/2);return a.sub(t,d,e,u,i)}return a.sub(t,n-1,e-n+1,o-1,i-o+1)}r.conv2=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t[2]&&t[2].data?h.apply(void 0,t):function(t){for(var r=t.data,e=r[0],n=1;n<r.length;n++)if(r[n]!==e)return!1;return!0}(t[1])?u.apply(void 0,t):d.apply(void 0,t)}},346:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.filter2=void 0;var n=e(687);r.filter2=function(t,r,e){return void 0===e&&(e="same"),n.conv2(r,function(t){for(var r=t.data,e=t.width,n=t.height,i=new Array(r.length),a=0;a<n;a++)for(var o=0;o<e;o++)i[a*e+o]=r[(n-1-a)*e+e-1-o];return{data:i,width:e,height:n}}(t),e)}},470:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.fspecial=void 0;var n=e(490);r.fspecial=function(t,r,e){void 0===r&&(r=3),void 0===e&&(e=1.5);var i=function(t,r){for(var e=t.data,n=t.width,i=t.height,a=new Array(e.length),o=0;o<e.length;o++)a[o]=Math.exp(-e[o]/(2*Math.pow(r,2)));return{data:a,width:n,height:i}}(function(t){for(var r=2*t+1,e=new Array(Math.pow(r,2)),n=0;n<r;n++)for(var i=0;i<r;i++)e[n*r+i]=Math.pow(n-t,2)+Math.pow(i-t,2);return{data:e,width:r,height:r}}(r=(r-1)/2),e),a=n.sum2d(i);return n.divide2d(i,a)}},521:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.imfilter=void 0;var n=e(20),i=e(389),a=e(490),o=e(346);r.imfilter=function(t,r,e,d){return void 0===e&&(e="symmetric"),void 0===d&&(d="same"),t=function(t,r,e,o){if(t=i.padarray(t,a.floor([r/2,e/2]),o),0===n.mod(r,2)&&(t.data=t.data.slice(0,-t.width),t.height--),0===n.mod(e,2)){for(var d=[],u=0;u<t.data.length;u++)(u+1)%t.width!=0&&d.push(t.data[u]);t.data=d,t.width--}return t}(t,r.width,r.height,e),d=function(t){return"same"===t&&(t="valid"),t}(d),o.filter2(r,t,d)}},971:function(t,r,e){var n=this&&this.__createBinding||(Object.create?function(t,r,e,n){void 0===n&&(n=e),Object.defineProperty(t,n,{enumerable:!0,get:function(){return r[e]}})}:function(t,r,e,n){void 0===n&&(n=e),t[n]=r[e]}),i=this&&this.__exportStar||function(t,r){for(var e in t)"default"===e||Object.prototype.hasOwnProperty.call(r,e)||n(r,t,e)};Object.defineProperty(r,"__esModule",{value:!0}),i(e(687),r),i(e(346),r),i(e(470),r),i(e(521),r),i(e(150),r),i(e(298),r),i(e(389),r),i(e(582),r),i(e(439),r),i(e(118),r),i(e(240),r),i(e(799),r)},928:function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.numbers=void 0,r.numbers=function(t,r,e){for(var n=r*t,i=new Array(n),a=0;a<n;a++)i[a]=e;return{data:i,width:r,height:t}}},20:function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.mod=void 0,r.mod=function(t,r){return t-r*Math.floor(t/r)}},150:function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.normpdf=void 0,r.normpdf=function(t,r,e){var n=t.data,i=t.width,a=t.height;void 0===r&&(r=0),void 0===e&&(e=1);for(var o=new Array(n.length),d=0;d<n.length;d++){var u=(n[d]-r)/e;o[d]=Math.exp(-Math.pow(u,2)/2)/(2.5066282746310007*e)}return{data:o,width:i,height:a}}},298:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.ones=void 0;var n=e(928);r.ones=function(t,r){return void 0===r&&(r=t),n.numbers(t,r,1)}},389:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.padarray=void 0;var n=e(20);r.padarray=function(t,r,e,i){var a=r[0],o=r[1];return t.height>=a&&t.width>=o?function(t,r){for(var e=r[0],n=r[1],i=t.width+2*n,a=t.height+2*e,o=new Array(i*a),d=-e;d<0;d++){for(var u=-n;u<0;u++)o[(d+e)*i+u+n]=t.data[(Math.abs(d)-1)*t.width+Math.abs(u)-1];for(u=0;u<t.width;u++)o[(d+e)*i+u+n]=t.data[(Math.abs(d)-1)*t.width+u];for(u=t.width;u<t.width+n;u++)o[(d+e)*i+u+n]=t.data[(Math.abs(d)-1)*t.width+2*t.width-u-1]}for(d=0;d<t.height;d++){for(u=-n;u<0;u++)o[(d+e)*i+u+n]=t.data[d*t.width+Math.abs(u)-1];for(u=0;u<t.width;u++)o[(d+e)*i+u+n]=t.data[d*t.width+u];for(u=t.width;u<t.width+n;u++)o[(d+e)*i+u+n]=t.data[d*t.width+2*t.width-u-1]}for(d=t.height;d<t.height+e;d++){for(u=-n;u<0;u++)o[(d+e)*i+u+n]=t.data[(2*t.height-d-1)*t.width+Math.abs(u)-1];for(u=0;u<t.width;u++)o[(d+e)*i+u+n]=t.data[(2*t.height-d-1)*t.width+u];for(u=t.width;u<t.width+n;u++)o[(d+e)*i+u+n]=t.data[(2*t.height-d-1)*t.width+2*t.width-u-1]}return{data:o,width:i,height:a}}(t,[a,o]):function(t,r){for(var e=function(t,r){return{data:t.data.concat(r.data),height:t.height+r.height,width:t.width}}(t,function(t){for(var r=t.data,e=t.width,n=t.height,i=new Array(r.length),a=0;a<n;a++)for(var o=0;o<e;o++)i[a*e+o]=r[(n-1-a)*e+o];return{data:i,width:e,height:n}}(t)),i=t.height+2*r,a=new Array(t.width*i),o=-r;o<t.height+r;o++)for(var d=0;d<t.width;d++)a[(o+r)*t.width+d]=e.data[n.mod(o,e.height)*t.width+d];return{data:a,width:t.width,height:i}}(function(t,r){for(var e=t.width+2*r,i=new Array(e*t.height),a=function(t,r){for(var e=t.width+r.width,n=new Array(t.height*e),i=0;i<t.height;i++){for(var a=0;a<t.width;a++)n[i*e+a]=t.data[i*t.width+a];for(a=0;a<r.width;a++)n[i*e+a+t.width]=r.data[i*r.width+a]}return{data:n,width:e,height:t.height}}(t,function(t){for(var r=t.data,e=t.width,n=t.height,i=new Array(r.length),a=0;a<n;a++)for(var o=0;o<e;o++)i[a*e+o]=r[a*e+e-1-o];return{data:i,width:e,height:n}}(t)),o=0;o<t.height;o++)for(var d=-r;d<t.width+r;d++)i[o*e+d+r]=a.data[o*a.width+n.mod(d,a.width)];return{data:i,width:e,height:t.height}}(t,o),a)}},582:function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.rgb2grayInteger=r.rgb2gray=void 0,r.rgb2gray=function(t){for(var r=t.data,e=t.width,n=t.height,i=new Uint8Array(e*n),a=0;a<r.length;a+=4)i[a/4]=.29894*r[a]+.58704*r[a+1]+.11402*r[a+2]+.5;return{data:Array.from(i),width:e,height:n}},r.rgb2grayInteger=function(t){for(var r=t.data,e=t.width,n=t.height,i=new Array(e*n),a=0;a<r.length;a+=4)i[a/4]=77*r[a]+150*r[a+1]+29*r[a+2]+128>>8;return{data:i,width:e,height:n}}},439:function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.skip2d=void 0,r.skip2d=function(t,r,e){for(var n=r[0],i=r[1],a=r[2],o=e[0],d=e[1],u=e[2],h=Math.ceil((u-o)/d),c=Math.ceil((a-n)/i),f=new Array(h*c),l=0;l<c;l++)for(var s=0;s<h;s++){var v=n+l*i,g=o+s*d;f[l*h+s]=t.data[v*t.width+g]}return{data:f,width:h,height:c}}},118:function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.sub=void 0,r.sub=function(t,r,e,n,i){for(var a=t.data,o=t.width,d=new Array(i*e),u=0;u<e;u++)for(var h=0;h<i;h++)d[u*i+h]=a[(n+u)*o+r+h];return{data:d,width:i,height:e}}},240:function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.transpose=void 0,r.transpose=function(t){for(var r=t.data,e=t.width,n=t.height,i=new Array(e*n),a=0;a<n;a++)for(var o=0;o<e;o++)i[o*n+a]=r[a*e+o];return{data:i,height:e,width:n}}},799:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.zeros=void 0;var n=e(928);r.zeros=function(t,r){return void 0===r&&(r=t),n.numbers(t,r,0)}},595:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.originalSsim=void 0;var n=e(490),i=e(971);r.originalSsim=function(t,r,e){var a=i.fspecial("gaussian",e.windowSize,1.5),o=Math.pow(2,e.bitDepth)-1,d=Math.pow(e.k1*o,2),u=Math.pow(e.k2*o,2);a=n.divide2d(a,n.sum2d(a));var h=i.filter2(a,t,"valid"),c=i.filter2(a,r,"valid"),f=n.square2d(h),l=n.square2d(c),s=n.multiply2d(h,c),v=n.square2d(t),g=n.square2d(r),w=n.subtract2d(i.filter2(a,v,"valid"),f),p=n.subtract2d(i.filter2(a,g,"valid"),l),y=n.subtract2d(i.filter2(a,n.multiply2d(t,r),"valid"),s);if(d>0&&u>0){var m=n.add2d(n.multiply2d(s,2),d),b=n.add2d(n.multiply2d(y,2),u),M=n.add2d(n.add2d(f,l),d),_=n.add2d(n.add2d(w,p),u);return n.divide2d(n.multiply2d(m,b),n.multiply2d(M,_))}var x=n.multiply2d(s,2),O=n.multiply2d(y,2),j=n.add2d(f,l),S=n.add2d(w,p);return n.divide2d(n.multiply2d(x,O),n.multiply2d(j,S))}},773:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.ssim=void 0;var n=e(490),i=e(971);r.ssim=function(t,r,e){var a=i.normpdf(function(t){for(var r=Math.floor(t/2),e=new Array(2*r+1),n=-r;n<=r;n++)e[n+r]=Math.abs(n);return{data:e,width:e.length,height:1}}(e.windowSize),0,1.5),o=Math.pow(2,e.bitDepth)-1,d=Math.pow(e.k1*o,2),u=Math.pow(e.k2*o,2);a=n.divide2d(a,n.sum2d(a));var h=i.transpose(a),c=i.conv2(t,a,h,"valid"),f=i.conv2(r,a,h,"valid"),l=n.square2d(c),s=n.square2d(f),v=n.multiply2d(c,f),g=n.square2d(t),w=n.square2d(r),p=n.subtract2d(i.conv2(g,a,h,"valid"),l),y=n.subtract2d(i.conv2(w,a,h,"valid"),s),m=n.subtract2d(i.conv2(n.multiply2d(t,r),a,h,"valid"),v);return d>0&&u>0?function(t,r,e,i,a,o,d,u){var h=n.add2d(n.multiply2d(t,2),d),c=n.add2d(n.multiply2d(r,2),u),f=n.add2d(n.add2d(e,i),d),l=n.add2d(n.add2d(a,o),u);return n.divide2d(n.multiply2d(h,c),n.multiply2d(f,l))}(v,m,l,s,p,y,d,u):function(t,r,e,i,a,o){var d=n.multiply2d(t,2),u=n.multiply2d(r,2),h=n.add2d(e,i),c=n.add2d(a,o);return n.divide2d(n.multiply2d(d,u),n.multiply2d(h,c))}(v,m,l,s,p,y)}},535:function(t,r){var e=this&&this.__assign||function(){return(e=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var i in r=arguments[e])Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);return t}).apply(this,arguments)};function n(t,r,e,n){return{rightEdge:e[r*n+t+1],bottomEdge:e[(r+1)*n+t],bottomRightEdge:e[(r+1)*n+t+1]}}function i(t,r){for(var e=t.width,i=t.height,a=t.data,o=e+1,d=i+1,u=new Int32Array(o*d),h=i-1;h>=0;--h)for(var c=e-1;c>=0;--c){var f=n(c,h,u,o),l=f.rightEdge,s=f.bottomEdge,v=f.bottomRightEdge;u[h*o+c]=r(a[h*e+c],c,h)+l+s-v}return{data:u,height:d,width:o}}function a(t,r,e){for(var i=t.width,a=t.height,o=t.data,d=r.data,u=i+1,h=a+1,c=new Int32Array(u*h),f=a-1;f>=0;--f)for(var l=i-1;l>=0;--l){var s=n(l,f,c,u),v=s.rightEdge,g=s.bottomEdge,w=s.bottomRightEdge,p=f*i+l;c[f*u+l]=e(o[p],d[p],l,f)+v+g-w}return{data:c,height:h,width:u}}function o(t,r,e){for(var n=t.width,i=t.height,a=t.data,o=n-1,d=i-1,u=o-r+1,h=d-r+1,c=new Int32Array(u*h),f=0;f<d;++f)for(var l=0;l<o;++l)if(l<u&&f<h){var s=a[n*f+l]-a[n*f+l+r]-a[n*(f+r)+l]+a[n*(f+r)+l+r];c[f*u+l]=s/e}return{height:h,width:u,data:c}}function d(t,r){return o(i(t,(function(t){return t})),r,1)}function u(t,r,e){for(var n=e*e,a=o(i(t,(function(t){return t*t})),e,1),d=0;d<r.data.length;++d){var u=r.data[d]/n,h=a.data[d]/n,c=u*u;a.data[d]=1024*(h-c)}return a}function h(t,r,e,n,i){for(var d=i*i,u=o(a(t,r,(function(t,r){return t*r})),i,1),h=0;h<e.data.length;++h)u.data[h]=1024*(u.data[h]/d-e.data[h]/d*(n.data[h]/d));return u}Object.defineProperty(r,"__esModule",{value:!0}),r.weberSsim=r.windowCovariance=r.windowVariance=r.windowSums=r.windowMatrix=r.partialSumMatrix2=r.partialSumMatrix1=void 0,r.partialSumMatrix1=i,r.partialSumMatrix2=a,r.windowMatrix=o,r.windowSums=d,r.windowVariance=u,r.windowCovariance=h,r.weberSsim=function(t,r,n){for(var i=n.bitDepth,a=n.k1,o=n.k2,c=n.windowSize,f=Math.pow(2,i)-1,l=a*f*(a*f),s=o*f*(o*f),v=c*c,g=e(e({},t),{data:Int32Array.from(t.data,(function(t){return t+.5}))}),w=e(e({},r),{data:Int32Array.from(r.data,(function(t){return t+.5}))}),p=d(g,c),y=u(g,p,c),m=d(w,c),b=u(w,m,c),M=h(g,w,p,m,c),_=p.data.length,x=0,O=new Array(_),j=0;j<_;++j){var S=p.data[j]/v,A=m.data[j]/v,k=y.data[j]/1024,E=b.data[j]/1024,P=(2*S*A+l)*(M.data[j]/1024*2+s)/(S*S+A*A+l)/(k+E+s);O[j]=P,0==j?x=P:x+=(P-x)/(j+1)}return{data:O,width:p.width,height:p.height,mssim:x}}}},r={};return function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{}};return t[n].call(i.exports,i,i.exports,e),i.exports}(607)}()},"object"==d(r)&&"object"==d(t)?t.exports=o():(i=[],void 0===(a="function"==typeof(n=o)?n.apply(r,i):n)||(t.exports=a))}},r={};function e(n){var i=r[n];if(void 0!==i)return i.exports;var a=r[n]={id:n,loaded:!1,exports:{}};return t[n](a,a.exports,e),a.loaded=!0,a.exports}e.n=t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},e.d=(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},e.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),e.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t=e(213),r=e.n(t);function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(){i=function(){return r};var t,r={},e=Object.prototype,a=e.hasOwnProperty,o=Object.defineProperty||function(t,r,e){t[r]=e.value},d="function"==typeof Symbol?Symbol:{},u=d.iterator||"@@iterator",h=d.asyncIterator||"@@asyncIterator",c=d.toStringTag||"@@toStringTag";function f(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{f({},"")}catch(t){f=function(t,r,e){return t[r]=e}}function l(t,r,e,n){var i=r&&r.prototype instanceof m?r:m,a=Object.create(i.prototype),d=new I(n||[]);return o(a,"_invoke",{value:k(t,e,d)}),a}function s(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=l;var v="suspendedStart",g="suspendedYield",w="executing",p="completed",y={};function m(){}function b(){}function M(){}var _={};f(_,u,(function(){return this}));var x=Object.getPrototypeOf,O=x&&x(x(D([])));O&&O!==e&&a.call(O,u)&&(_=O);var j=M.prototype=m.prototype=Object.create(_);function S(t){["next","throw","return"].forEach((function(r){f(t,r,(function(t){return this._invoke(r,t)}))}))}function A(t,r){function e(i,o,d,u){var h=s(t[i],t,o);if("throw"!==h.type){var c=h.arg,f=c.value;return f&&"object"==n(f)&&a.call(f,"__await")?r.resolve(f.__await).then((function(t){e("next",t,d,u)}),(function(t){e("throw",t,d,u)})):r.resolve(f).then((function(t){c.value=t,d(c)}),(function(t){return e("throw",t,d,u)}))}u(h.arg)}var i;o(this,"_invoke",{value:function(t,n){function a(){return new r((function(r,i){e(t,n,r,i)}))}return i=i?i.then(a,a):a()}})}function k(r,e,n){var i=v;return function(a,o){if(i===w)throw Error("Generator is already running");if(i===p){if("throw"===a)throw o;return{value:t,done:!0}}for(n.method=a,n.arg=o;;){var d=n.delegate;if(d){var u=E(d,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===v)throw i=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=w;var h=s(r,e,n);if("normal"===h.type){if(i=n.done?p:g,h.arg===y)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(i=p,n.method="throw",n.arg=h.arg)}}}function E(r,e){var n=e.method,i=r.iterator[n];if(i===t)return e.delegate=null,"throw"===n&&r.iterator.return&&(e.method="return",e.arg=t,E(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=s(i,r.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,y;var o=a.arg;return o?o.done?(e[r.resultName]=o.value,e.next=r.nextLoc,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,y):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function P(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function L(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function D(r){if(r||""===r){var e=r[u];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var i=-1,o=function e(){for(;++i<r.length;)if(a.call(r,i))return e.value=r[i],e.done=!1,e;return e.value=t,e.done=!0,e};return o.next=o}}throw new TypeError(n(r)+" is not iterable")}return b.prototype=M,o(j,"constructor",{value:M,configurable:!0}),o(M,"constructor",{value:b,configurable:!0}),b.displayName=f(M,c,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===b||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,M):(t.__proto__=M,f(t,c,"GeneratorFunction")),t.prototype=Object.create(j),t},r.awrap=function(t){return{__await:t}},S(A.prototype),f(A.prototype,h,(function(){return this})),r.AsyncIterator=A,r.async=function(t,e,n,i,a){void 0===a&&(a=Promise);var o=new A(l(t,e,n,i),a);return r.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},S(j),f(j,c,"Generator"),f(j,u,(function(){return this})),f(j,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=D,I.prototype={constructor:I,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!r)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(n,i){return d.type="throw",d.arg=r,e.next=n,i&&(e.method="next",e.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],d=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=a.call(o,"catchLoc"),h=a.call(o,"finallyLoc");if(u&&h){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!h)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=r,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(o)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),y},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),L(e),y}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var i=n.arg;L(e)}return i}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={iterator:D(r),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=t),y}},r}function a(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=o(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,d=!0,u=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return d=t.done,t},e:function(t){u=!0,a=t},f:function(){try{d||null==e.return||e.return()}finally{if(u)throw a}}}}function o(t,r){if(t){if("string"==typeof t)return d(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?d(t,r):void 0}}function d(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function u(t,r,e,n,i,a,o){try{var d=t[a](o),u=d.value}catch(t){return void e(t)}d.done?r(u):Promise.resolve(u).then(n,i)}var h=[];function c(t,r){return new Promise((function(e,n){var i=document.createElement("canvas");t.clientWidth,t.clientHeight,i.width=36,i.height=36;var a=(new XMLSerializer).serializeToString(t),o=new Blob([a],{type:"image/svg+xml;charset=utf-8"}),d=URL.createObjectURL(o),u=new Image;u.onload=function(){var t=i.getContext("2d");t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,i.width,i.height),t.fillStyle="#ffffff",t.fillRect(0,0,i.width,i.height),t.drawImage(u,0,0);var n=i.toDataURL("image/png"),a=t.getImageData(0,0,i.width,i.height);URL.revokeObjectURL(d),e({idx:r,pngData:a,pngDataUrl:n})},u.onerror=function(){n(new Error("Failed to load image for SVG element "+r))},u.src=d}))}window.onload=function(){h=document.querySelectorAll("svg.icon"),console.log("lcw onload testing",h,document.querySelectorAll("svg.icon"))},setTimeout((function(){h=document.querySelectorAll("svg.icon"),console.log("lcw settimeout",h,document.querySelectorAll("svg.icon"))}),3e3),chrome.runtime.onMessage.addListener(function(){var t,e=(t=i().mark((function t(e,n,d){var u,f,l,s,v,g,w,p,y,m,b,M;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("lcw i am content",n.tab?"from a content script:"+n.tab.url:"from the extension",h),u=[],f=new Date,l=document.querySelectorAll("svg.icon"),s=a(l.entries()),t.prev=5,s.s();case 7:if((v=s.n()).done){t.next=15;break}return e=v.value,i=2,g=function(t){if(Array.isArray(t))return t}(e)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,i,a,o,d=[],u=!0,h=!1;try{if(a=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;u=!1}else for(;!(u=(n=a.call(e)).done)&&(d.push(n.value),d.length!==r);u=!0);}catch(t){h=!0,i=t}finally{try{if(!u&&null!=e.return&&(o=e.return(),Object(o)!==o))return}finally{if(h)throw i}}return d}}(e,i)||o(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),w=g[0],p=g[1],t.next=11,c(p,w);case 11:y=t.sent,u.push(y);case 13:t.next=7;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(5),s.e(t.t0);case 20:return t.prev=20,s.f(),t.finish(20);case 23:return t.prev=23,t.next=26,Promise.all(u);case 26:m=t.sent,b=new Date,console.log("lcw time",b-f,m),M=r()(m[0].pngData,m[1].pngData),console.log("lcw ssim",M,m[0].idx,m[1].idx,m[0].pngDataUrl,m[1].pngDataUrl),t.next=36;break;case 33:t.prev=33,t.t1=t.catch(23),console.error("lcw Error processing SVG elements:",t.t1);case 36:return t.abrupt("return",!0);case 37:case"end":return t.stop()}var e,i}),t,null,[[5,17,20,23],[23,33]])})),function(){var r=this,e=arguments;return new Promise((function(n,i){var a=t.apply(r,e);function o(t){u(a,n,i,o,d,"next",t)}function d(t){u(a,n,i,o,d,"throw",t)}o(void 0)}))});return function(t,r,n){return e.apply(this,arguments)}}())})()})();