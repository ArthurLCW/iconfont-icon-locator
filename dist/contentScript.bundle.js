/*! For license information please see contentScript.bundle.js.LICENSE.txt */
(()=>{var t={213:(t,r,e)=>{var n,a,i,o;function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}t=e.nmd(t),self,o=function(){return function(){"use strict";var t={132:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.bezkrovnySsim=void 0;var n=e(490),a=e(971);function i(t,r,e){var a=t.data,i=r.data,o=e.bitDepth,u=e.k1,d=e.k2,h=Math.pow(2,o)-1,c=Math.pow(u*h,2),f=Math.pow(d*h,2),l=n.average(a),s=n.average(i),v=n.variance(a,l),g=n.variance(i,s);return(2*l*s+c)*(2*n.covariance(a,i,l,s)+f)/((Math.pow(l,2)+Math.pow(s,2)+c)*(v+g+f))}r.bezkrovnySsim=function(t,r,e){for(var n=e.windowSize,o=Math.ceil(t.width/n),u=Math.ceil(t.height/n),d=new Array(o*u),h=0,c=0;c<t.height;c+=n)for(var f=0;f<t.width;f+=n){var l=Math.min(n,t.width-f),s=Math.min(n,t.height-c),v=a.sub(t,f,s,c,l),g=a.sub(r,f,s,c,l);d[h++]=i(v,g,e)}return{data:d,width:o,height:u}}},63:function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.defaults=void 0,r.defaults={windowSize:11,k1:.01,k2:.03,bitDepth:8,downsample:"original",ssim:"weber",maxSize:256,rgb2grayVersion:"integer"}},441:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.downsample=void 0;var n=e(490),a=e(971);function i(t,r,e){var n=a.imfilter(t,r,"symmetric","same");return a.skip2d(n,[0,e,n.height],[0,e,n.width])}r.downsample=function(t,r){return"original"===r.downsample?function(t,r,e){void 0===e&&(e=256);var o=Math.min(t.width,r.height)/e,u=Math.round(o);if(u>1){var d=a.ones(u);t=i(t,d=n.divide2d(d,n.sum2d(d)),u),r=i(r,d,u)}return[t,r]}(t[0],t[1],r.maxSize):t}},607:function(t,r,e){var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t}).apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.ssim=r.getOptions=void 0;var a=e(971),i=e(490),o=e(773),u=e(595),d=e(132),h=e(441),c=e(63),f=e(535),l={fast:o.ssim,original:u.originalSsim,bezkrovny:d.bezkrovnySsim,weber:f.weberSsim};function s(t){var r=n(n({},c.defaults),t);return function(t){if(Object.keys(t).forEach((function(t){if(!(t in c.defaults))throw new Error('"'+t+'" is not a valid option')})),"k1"in t&&("number"!=typeof t.k1||t.k1<0))throw new Error("Invalid k1 value. Default is "+c.defaults.k1);if("k2"in t&&("number"!=typeof t.k2||t.k2<0))throw new Error("Invalid k2 value. Default is "+c.defaults.k2);if(!(t.ssim in l))throw new Error("Invalid ssim option (use: "+Object.keys(l).join(", ")+")")}(r),r}function v(t,r,e){var n,o,u,d,c=(new Date).getTime(),f=function(t){var r=t[0],e=t[1],n=t[2];return l[n.ssim](r,e,n)}(function(t){var r=t[0],e=t[1],n=t[2],a=h.downsample([r,e],n);return[a[0],a[1],n]}((n=function(t){var r=t[0],e=t[1],n=t[2];if(r.width!==e.width||r.height!==e.height)throw new Error("Image dimensions do not match");return[r,e,n]}([t,r,s(e)]),o=n[0],u=n[1],"original"===(d=n[2]).rgb2grayVersion?[a.rgb2gray(o),a.rgb2gray(u),d]:[a.rgb2grayInteger(o),a.rgb2grayInteger(u),d])));return{mssim:void 0!==f.mssim?f.mssim:i.mean2d(f),ssim_map:f,performance:(new Date).getTime()-c}}r.getOptions=s,r.ssim=v,r.default=v},490:function(t,r){function e(t){return n(t)/t.length}function n(t){for(var r=0,e=0;e<t.length;e++)r+=t[e];return r}function a(t){for(var r=t.data,e=0,n=0;n<r.length;n++)e+=r[n];return e}function i(t,r){for(var e=t.data,n=t.width,a=t.height,i=new Array(e.length),o=0;o<e.length;o++)i[o]=e[o]+r;return{data:i,width:n,height:a}}function o(t,r){return"number"==typeof r?function(t,r){for(var e=t.data,n=t.width,a=t.height,i=new Array(e.length),o=0;o<e.length;o++)i[o]=e[o]*r;return{data:i,width:n,height:a}}(t,r):function(t,r){for(var e=t.data,n=t.width,a=t.height,i=r.data,o=new Array(e.length),u=0;u<e.length;u++)o[u]=e[u]*i[u];return{data:o,width:n,height:a}}(t,r)}Object.defineProperty(r,"__esModule",{value:!0}),r.covariance=r.variance=r.mean2d=r.square2d=r.multiply2d=r.divide2d=r.subtract2d=r.add2d=r.sum2d=r.floor=r.sum=r.average=void 0,r.average=e,r.sum=n,r.floor=function(t){for(var r=new Array(t.length),e=0;e<t.length;e++)r[e]=Math.floor(t[e]);return r},r.sum2d=a,r.add2d=function(t,r){return"number"==typeof r?i(t,r):function(t,r){for(var e=t.data,n=t.width,a=t.height,i=r.data,o=new Array(e.length),u=0;u<a;u++)for(var d=u*n,h=0;h<n;h++)o[d+h]=e[d+h]+i[d+h];return{data:o,width:n,height:a}}(t,r)},r.subtract2d=function(t,r){return"number"==typeof r?i(t,-r):function(t,r){for(var e=t.data,n=t.width,a=t.height,i=r.data,o=new Array(e.length),u=0;u<a;u++)for(var d=u*n,h=0;h<n;h++)o[d+h]=e[d+h]-i[d+h];return{data:o,width:n,height:a}}(t,r)},r.divide2d=function(t,r){return"number"==typeof r?function(t,r){for(var e=t.data,n=t.width,a=t.height,i=new Array(e.length),o=0;o<e.length;o++)i[o]=e[o]/r;return{data:i,width:n,height:a}}(t,r):function(t,r){for(var e=t.data,n=t.width,a=t.height,i=r.data,o=new Array(e.length),u=0;u<e.length;u++)o[u]=e[u]/i[u];return{data:o,width:n,height:a}}(t,r)},r.multiply2d=o,r.square2d=function(t){return o(t,t)},r.mean2d=function(t){return a(t)/t.data.length},r.variance=function(t,r){void 0===r&&(r=e(t));for(var n=0,a=t.length;a--;)n+=Math.pow(t[a]-r,2);return n/t.length},r.covariance=function(t,r,n,a){void 0===n&&(n=e(t)),void 0===a&&(a=e(r));for(var i=0,o=t.length;o--;)i+=(t[o]-n)*(r[o]-a);return i/t.length}},687:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.conv2=void 0;var n=e(490),a=e(298),i=e(118),o=e(799);function u(t,r,e){var n=t.data,a=t.width,i=t.height;void 0===e&&(e="full");for(var u=a+r.width-1,d=i+r.height-1,h=o.zeros(d,u).data,f=0;f<r.height;f++)for(var l=0;l<r.width;l++){var s=r.data[f*r.width+l];if(s)for(var v=0;v<i;v++)for(var g=0;g<a;g++)h[(v+f)*u+g+l]+=n[v*a+g]*s}return c({data:h,width:u,height:d},e,i,r.height,a,r.width)}function d(t,r,e){var i=r.data,o=r.width,u=r.height;void 0===e&&(e="full");var d=h(t,a.ones(u,1),a.ones(1,o),e);return n.multiply2d(d,i[0])}function h(t,r,e,n){void 0===n&&(n="full");var a=Math.max(r.height,r.width),i=Math.max(e.height,e.width),o=u(t,r,"full");return c(u(o,e,"full"),n,t.height,a,t.width,i)}function c(t,r,e,n,a,o){if("full"===r)return t;if("same"===r){var u=Math.ceil((t.height-e)/2),d=Math.ceil((t.width-a)/2);return i.sub(t,u,e,d,a)}return i.sub(t,n-1,e-n+1,o-1,a-o+1)}r.conv2=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t[2]&&t[2].data?h.apply(void 0,t):function(t){for(var r=t.data,e=r[0],n=1;n<r.length;n++)if(r[n]!==e)return!1;return!0}(t[1])?d.apply(void 0,t):u.apply(void 0,t)}},346:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.filter2=void 0;var n=e(687);r.filter2=function(t,r,e){return void 0===e&&(e="same"),n.conv2(r,function(t){for(var r=t.data,e=t.width,n=t.height,a=new Array(r.length),i=0;i<n;i++)for(var o=0;o<e;o++)a[i*e+o]=r[(n-1-i)*e+e-1-o];return{data:a,width:e,height:n}}(t),e)}},470:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.fspecial=void 0;var n=e(490);r.fspecial=function(t,r,e){void 0===r&&(r=3),void 0===e&&(e=1.5);var a=function(t,r){for(var e=t.data,n=t.width,a=t.height,i=new Array(e.length),o=0;o<e.length;o++)i[o]=Math.exp(-e[o]/(2*Math.pow(r,2)));return{data:i,width:n,height:a}}(function(t){for(var r=2*t+1,e=new Array(Math.pow(r,2)),n=0;n<r;n++)for(var a=0;a<r;a++)e[n*r+a]=Math.pow(n-t,2)+Math.pow(a-t,2);return{data:e,width:r,height:r}}(r=(r-1)/2),e),i=n.sum2d(a);return n.divide2d(a,i)}},521:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.imfilter=void 0;var n=e(20),a=e(389),i=e(490),o=e(346);r.imfilter=function(t,r,e,u){return void 0===e&&(e="symmetric"),void 0===u&&(u="same"),t=function(t,r,e,o){if(t=a.padarray(t,i.floor([r/2,e/2]),o),0===n.mod(r,2)&&(t.data=t.data.slice(0,-t.width),t.height--),0===n.mod(e,2)){for(var u=[],d=0;d<t.data.length;d++)(d+1)%t.width!=0&&u.push(t.data[d]);t.data=u,t.width--}return t}(t,r.width,r.height,e),u=function(t){return"same"===t&&(t="valid"),t}(u),o.filter2(r,t,u)}},971:function(t,r,e){var n=this&&this.__createBinding||(Object.create?function(t,r,e,n){void 0===n&&(n=e),Object.defineProperty(t,n,{enumerable:!0,get:function(){return r[e]}})}:function(t,r,e,n){void 0===n&&(n=e),t[n]=r[e]}),a=this&&this.__exportStar||function(t,r){for(var e in t)"default"===e||Object.prototype.hasOwnProperty.call(r,e)||n(r,t,e)};Object.defineProperty(r,"__esModule",{value:!0}),a(e(687),r),a(e(346),r),a(e(470),r),a(e(521),r),a(e(150),r),a(e(298),r),a(e(389),r),a(e(582),r),a(e(439),r),a(e(118),r),a(e(240),r),a(e(799),r)},928:function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.numbers=void 0,r.numbers=function(t,r,e){for(var n=r*t,a=new Array(n),i=0;i<n;i++)a[i]=e;return{data:a,width:r,height:t}}},20:function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.mod=void 0,r.mod=function(t,r){return t-r*Math.floor(t/r)}},150:function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.normpdf=void 0,r.normpdf=function(t,r,e){var n=t.data,a=t.width,i=t.height;void 0===r&&(r=0),void 0===e&&(e=1);for(var o=new Array(n.length),u=0;u<n.length;u++){var d=(n[u]-r)/e;o[u]=Math.exp(-Math.pow(d,2)/2)/(2.5066282746310007*e)}return{data:o,width:a,height:i}}},298:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.ones=void 0;var n=e(928);r.ones=function(t,r){return void 0===r&&(r=t),n.numbers(t,r,1)}},389:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.padarray=void 0;var n=e(20);r.padarray=function(t,r,e,a){var i=r[0],o=r[1];return t.height>=i&&t.width>=o?function(t,r){for(var e=r[0],n=r[1],a=t.width+2*n,i=t.height+2*e,o=new Array(a*i),u=-e;u<0;u++){for(var d=-n;d<0;d++)o[(u+e)*a+d+n]=t.data[(Math.abs(u)-1)*t.width+Math.abs(d)-1];for(d=0;d<t.width;d++)o[(u+e)*a+d+n]=t.data[(Math.abs(u)-1)*t.width+d];for(d=t.width;d<t.width+n;d++)o[(u+e)*a+d+n]=t.data[(Math.abs(u)-1)*t.width+2*t.width-d-1]}for(u=0;u<t.height;u++){for(d=-n;d<0;d++)o[(u+e)*a+d+n]=t.data[u*t.width+Math.abs(d)-1];for(d=0;d<t.width;d++)o[(u+e)*a+d+n]=t.data[u*t.width+d];for(d=t.width;d<t.width+n;d++)o[(u+e)*a+d+n]=t.data[u*t.width+2*t.width-d-1]}for(u=t.height;u<t.height+e;u++){for(d=-n;d<0;d++)o[(u+e)*a+d+n]=t.data[(2*t.height-u-1)*t.width+Math.abs(d)-1];for(d=0;d<t.width;d++)o[(u+e)*a+d+n]=t.data[(2*t.height-u-1)*t.width+d];for(d=t.width;d<t.width+n;d++)o[(u+e)*a+d+n]=t.data[(2*t.height-u-1)*t.width+2*t.width-d-1]}return{data:o,width:a,height:i}}(t,[i,o]):function(t,r){for(var e=function(t,r){return{data:t.data.concat(r.data),height:t.height+r.height,width:t.width}}(t,function(t){for(var r=t.data,e=t.width,n=t.height,a=new Array(r.length),i=0;i<n;i++)for(var o=0;o<e;o++)a[i*e+o]=r[(n-1-i)*e+o];return{data:a,width:e,height:n}}(t)),a=t.height+2*r,i=new Array(t.width*a),o=-r;o<t.height+r;o++)for(var u=0;u<t.width;u++)i[(o+r)*t.width+u]=e.data[n.mod(o,e.height)*t.width+u];return{data:i,width:t.width,height:a}}(function(t,r){for(var e=t.width+2*r,a=new Array(e*t.height),i=function(t,r){for(var e=t.width+r.width,n=new Array(t.height*e),a=0;a<t.height;a++){for(var i=0;i<t.width;i++)n[a*e+i]=t.data[a*t.width+i];for(i=0;i<r.width;i++)n[a*e+i+t.width]=r.data[a*r.width+i]}return{data:n,width:e,height:t.height}}(t,function(t){for(var r=t.data,e=t.width,n=t.height,a=new Array(r.length),i=0;i<n;i++)for(var o=0;o<e;o++)a[i*e+o]=r[i*e+e-1-o];return{data:a,width:e,height:n}}(t)),o=0;o<t.height;o++)for(var u=-r;u<t.width+r;u++)a[o*e+u+r]=i.data[o*i.width+n.mod(u,i.width)];return{data:a,width:e,height:t.height}}(t,o),i)}},582:function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.rgb2grayInteger=r.rgb2gray=void 0,r.rgb2gray=function(t){for(var r=t.data,e=t.width,n=t.height,a=new Uint8Array(e*n),i=0;i<r.length;i+=4)a[i/4]=.29894*r[i]+.58704*r[i+1]+.11402*r[i+2]+.5;return{data:Array.from(a),width:e,height:n}},r.rgb2grayInteger=function(t){for(var r=t.data,e=t.width,n=t.height,a=new Array(e*n),i=0;i<r.length;i+=4)a[i/4]=77*r[i]+150*r[i+1]+29*r[i+2]+128>>8;return{data:a,width:e,height:n}}},439:function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.skip2d=void 0,r.skip2d=function(t,r,e){for(var n=r[0],a=r[1],i=r[2],o=e[0],u=e[1],d=e[2],h=Math.ceil((d-o)/u),c=Math.ceil((i-n)/a),f=new Array(h*c),l=0;l<c;l++)for(var s=0;s<h;s++){var v=n+l*a,g=o+s*u;f[l*h+s]=t.data[v*t.width+g]}return{data:f,width:h,height:c}}},118:function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.sub=void 0,r.sub=function(t,r,e,n,a){for(var i=t.data,o=t.width,u=new Array(a*e),d=0;d<e;d++)for(var h=0;h<a;h++)u[d*a+h]=i[(n+d)*o+r+h];return{data:u,width:a,height:e}}},240:function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.transpose=void 0,r.transpose=function(t){for(var r=t.data,e=t.width,n=t.height,a=new Array(e*n),i=0;i<n;i++)for(var o=0;o<e;o++)a[o*n+i]=r[i*e+o];return{data:a,height:e,width:n}}},799:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.zeros=void 0;var n=e(928);r.zeros=function(t,r){return void 0===r&&(r=t),n.numbers(t,r,0)}},595:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.originalSsim=void 0;var n=e(490),a=e(971);r.originalSsim=function(t,r,e){var i=a.fspecial("gaussian",e.windowSize,1.5),o=Math.pow(2,e.bitDepth)-1,u=Math.pow(e.k1*o,2),d=Math.pow(e.k2*o,2);i=n.divide2d(i,n.sum2d(i));var h=a.filter2(i,t,"valid"),c=a.filter2(i,r,"valid"),f=n.square2d(h),l=n.square2d(c),s=n.multiply2d(h,c),v=n.square2d(t),g=n.square2d(r),w=n.subtract2d(a.filter2(i,v,"valid"),f),p=n.subtract2d(a.filter2(i,g,"valid"),l),y=n.subtract2d(a.filter2(i,n.multiply2d(t,r),"valid"),s);if(u>0&&d>0){var m=n.add2d(n.multiply2d(s,2),u),b=n.add2d(n.multiply2d(y,2),d),M=n.add2d(n.add2d(f,l),u),_=n.add2d(n.add2d(w,p),d);return n.divide2d(n.multiply2d(m,b),n.multiply2d(M,_))}var x=n.multiply2d(s,2),O=n.multiply2d(y,2),j=n.add2d(f,l),S=n.add2d(w,p);return n.divide2d(n.multiply2d(x,O),n.multiply2d(j,S))}},773:function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.ssim=void 0;var n=e(490),a=e(971);r.ssim=function(t,r,e){var i=a.normpdf(function(t){for(var r=Math.floor(t/2),e=new Array(2*r+1),n=-r;n<=r;n++)e[n+r]=Math.abs(n);return{data:e,width:e.length,height:1}}(e.windowSize),0,1.5),o=Math.pow(2,e.bitDepth)-1,u=Math.pow(e.k1*o,2),d=Math.pow(e.k2*o,2);i=n.divide2d(i,n.sum2d(i));var h=a.transpose(i),c=a.conv2(t,i,h,"valid"),f=a.conv2(r,i,h,"valid"),l=n.square2d(c),s=n.square2d(f),v=n.multiply2d(c,f),g=n.square2d(t),w=n.square2d(r),p=n.subtract2d(a.conv2(g,i,h,"valid"),l),y=n.subtract2d(a.conv2(w,i,h,"valid"),s),m=n.subtract2d(a.conv2(n.multiply2d(t,r),i,h,"valid"),v);return u>0&&d>0?function(t,r,e,a,i,o,u,d){var h=n.add2d(n.multiply2d(t,2),u),c=n.add2d(n.multiply2d(r,2),d),f=n.add2d(n.add2d(e,a),u),l=n.add2d(n.add2d(i,o),d);return n.divide2d(n.multiply2d(h,c),n.multiply2d(f,l))}(v,m,l,s,p,y,u,d):function(t,r,e,a,i,o){var u=n.multiply2d(t,2),d=n.multiply2d(r,2),h=n.add2d(e,a),c=n.add2d(i,o);return n.divide2d(n.multiply2d(u,d),n.multiply2d(h,c))}(v,m,l,s,p,y)}},535:function(t,r){var e=this&&this.__assign||function(){return(e=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t}).apply(this,arguments)};function n(t,r,e,n){return{rightEdge:e[r*n+t+1],bottomEdge:e[(r+1)*n+t],bottomRightEdge:e[(r+1)*n+t+1]}}function a(t,r){for(var e=t.width,a=t.height,i=t.data,o=e+1,u=a+1,d=new Int32Array(o*u),h=a-1;h>=0;--h)for(var c=e-1;c>=0;--c){var f=n(c,h,d,o),l=f.rightEdge,s=f.bottomEdge,v=f.bottomRightEdge;d[h*o+c]=r(i[h*e+c],c,h)+l+s-v}return{data:d,height:u,width:o}}function i(t,r,e){for(var a=t.width,i=t.height,o=t.data,u=r.data,d=a+1,h=i+1,c=new Int32Array(d*h),f=i-1;f>=0;--f)for(var l=a-1;l>=0;--l){var s=n(l,f,c,d),v=s.rightEdge,g=s.bottomEdge,w=s.bottomRightEdge,p=f*a+l;c[f*d+l]=e(o[p],u[p],l,f)+v+g-w}return{data:c,height:h,width:d}}function o(t,r,e){for(var n=t.width,a=t.height,i=t.data,o=n-1,u=a-1,d=o-r+1,h=u-r+1,c=new Int32Array(d*h),f=0;f<u;++f)for(var l=0;l<o;++l)if(l<d&&f<h){var s=i[n*f+l]-i[n*f+l+r]-i[n*(f+r)+l]+i[n*(f+r)+l+r];c[f*d+l]=s/e}return{height:h,width:d,data:c}}function u(t,r){return o(a(t,(function(t){return t})),r,1)}function d(t,r,e){for(var n=e*e,i=o(a(t,(function(t){return t*t})),e,1),u=0;u<r.data.length;++u){var d=r.data[u]/n,h=i.data[u]/n,c=d*d;i.data[u]=1024*(h-c)}return i}function h(t,r,e,n,a){for(var u=a*a,d=o(i(t,r,(function(t,r){return t*r})),a,1),h=0;h<e.data.length;++h)d.data[h]=1024*(d.data[h]/u-e.data[h]/u*(n.data[h]/u));return d}Object.defineProperty(r,"__esModule",{value:!0}),r.weberSsim=r.windowCovariance=r.windowVariance=r.windowSums=r.windowMatrix=r.partialSumMatrix2=r.partialSumMatrix1=void 0,r.partialSumMatrix1=a,r.partialSumMatrix2=i,r.windowMatrix=o,r.windowSums=u,r.windowVariance=d,r.windowCovariance=h,r.weberSsim=function(t,r,n){for(var a=n.bitDepth,i=n.k1,o=n.k2,c=n.windowSize,f=Math.pow(2,a)-1,l=i*f*(i*f),s=o*f*(o*f),v=c*c,g=e(e({},t),{data:Int32Array.from(t.data,(function(t){return t+.5}))}),w=e(e({},r),{data:Int32Array.from(r.data,(function(t){return t+.5}))}),p=u(g,c),y=d(g,p,c),m=u(w,c),b=d(w,m,c),M=h(g,w,p,m,c),_=p.data.length,x=0,O=new Array(_),j=0;j<_;++j){var S=p.data[j]/v,k=m.data[j]/v,A=y.data[j]/1024,E=b.data[j]/1024,P=(2*S*k+l)*(M.data[j]/1024*2+s)/(S*S+k*k+l)/(A+E+s);O[j]=P,0==j?x=P:x+=(P-x)/(j+1)}return{data:O,width:p.width,height:p.height,mssim:x}}}},r={};return function e(n){if(r[n])return r[n].exports;var a=r[n]={exports:{}};return t[n].call(a.exports,a,a.exports,e),a.exports}(607)}()},"object"==u(r)&&"object"==u(t)?t.exports=o():(a=[],void 0===(i="function"==typeof(n=o)?n.apply(r,a):n)||(t.exports=i))}},r={};function e(n){var a=r[n];if(void 0!==a)return a.exports;var i=r[n]={id:n,loaded:!1,exports:{}};return t[n](i,i.exports,e),i.loaded=!0,i.exports}e.n=t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},e.d=(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},e.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),e.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t=e(213),r=e.n(t);function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function a(){a=function(){return r};var t,r={},e=Object.prototype,i=e.hasOwnProperty,o=Object.defineProperty||function(t,r,e){t[r]=e.value},u="function"==typeof Symbol?Symbol:{},d=u.iterator||"@@iterator",h=u.asyncIterator||"@@asyncIterator",c=u.toStringTag||"@@toStringTag";function f(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{f({},"")}catch(t){f=function(t,r,e){return t[r]=e}}function l(t,r,e,n){var a=r&&r.prototype instanceof m?r:m,i=Object.create(a.prototype),u=new I(n||[]);return o(i,"_invoke",{value:A(t,e,u)}),i}function s(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}r.wrap=l;var v="suspendedStart",g="suspendedYield",w="executing",p="completed",y={};function m(){}function b(){}function M(){}var _={};f(_,d,(function(){return this}));var x=Object.getPrototypeOf,O=x&&x(x(D([])));O&&O!==e&&i.call(O,d)&&(_=O);var j=M.prototype=m.prototype=Object.create(_);function S(t){["next","throw","return"].forEach((function(r){f(t,r,(function(t){return this._invoke(r,t)}))}))}function k(t,r){function e(a,o,u,d){var h=s(t[a],t,o);if("throw"!==h.type){var c=h.arg,f=c.value;return f&&"object"==n(f)&&i.call(f,"__await")?r.resolve(f.__await).then((function(t){e("next",t,u,d)}),(function(t){e("throw",t,u,d)})):r.resolve(f).then((function(t){c.value=t,u(c)}),(function(t){return e("throw",t,u,d)}))}d(h.arg)}var a;o(this,"_invoke",{value:function(t,n){function i(){return new r((function(r,a){e(t,n,r,a)}))}return a=a?a.then(i,i):i()}})}function A(r,e,n){var a=v;return function(i,o){if(a===w)throw Error("Generator is already running");if(a===p){if("throw"===i)throw o;return{value:t,done:!0}}for(n.method=i,n.arg=o;;){var u=n.delegate;if(u){var d=E(u,n);if(d){if(d===y)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===v)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=w;var h=s(r,e,n);if("normal"===h.type){if(a=n.done?p:g,h.arg===y)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(a=p,n.method="throw",n.arg=h.arg)}}}function E(r,e){var n=e.method,a=r.iterator[n];if(a===t)return e.delegate=null,"throw"===n&&r.iterator.return&&(e.method="return",e.arg=t,E(r,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=s(a,r.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,y;var o=i.arg;return o?o.done?(e[r.resultName]=o.value,e.next=r.nextLoc,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,y):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function P(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function L(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function D(r){if(r||""===r){var e=r[d];if(e)return e.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var a=-1,o=function e(){for(;++a<r.length;)if(i.call(r,a))return e.value=r[a],e.done=!1,e;return e.value=t,e.done=!0,e};return o.next=o}}throw new TypeError(n(r)+" is not iterable")}return b.prototype=M,o(j,"constructor",{value:M,configurable:!0}),o(M,"constructor",{value:b,configurable:!0}),b.displayName=f(M,c,"GeneratorFunction"),r.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===b||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,M):(t.__proto__=M,f(t,c,"GeneratorFunction")),t.prototype=Object.create(j),t},r.awrap=function(t){return{__await:t}},S(k.prototype),f(k.prototype,h,(function(){return this})),r.AsyncIterator=k,r.async=function(t,e,n,a,i){void 0===i&&(i=Promise);var o=new k(l(t,e,n,a),i);return r.isGeneratorFunction(e)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},S(j),f(j,c,"Generator"),f(j,d,(function(){return this})),f(j,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=D,I.prototype={constructor:I,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!r)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(n,a){return u.type="throw",u.arg=r,e.next=n,a&&(e.method="next",e.arg=t),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var d=i.call(o,"catchLoc"),h=i.call(o,"finallyLoc");if(d&&h){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(d){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!h)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=r,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(o)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),y},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),L(e),y}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var a=n.arg;L(e)}return a}}throw Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={iterator:D(r),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=t),y}},r}function i(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=o(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,d=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return u=t.done,t},e:function(t){d=!0,i=t},f:function(){try{u||null==e.return||e.return()}finally{if(d)throw i}}}}function o(t,r){if(t){if("string"==typeof t)return u(t,r);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?u(t,r):void 0}}function u(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function d(t,r,e,n,a,i,o){try{var u=t[i](o),d=u.value}catch(t){return void e(t)}u.done?r(d):Promise.resolve(d).then(n,a)}function h(t){return function(){var r=this,e=arguments;return new Promise((function(n,a){var i=t.apply(r,e);function o(t){d(i,n,a,o,u,"next",t)}function u(t){d(i,n,a,o,u,"throw",t)}o(void 0)}))}}var c=[],f=[];function l(t,r){return new Promise((function(e,n){var a=document.createElement("canvas");a.width=36,a.height=36;var i=(new XMLSerializer).serializeToString(t),o=new Blob([i],{type:"image/svg+xml;charset=utf-8"}),u=URL.createObjectURL(o),d=new Image;d.onload=function(){var t=a.getContext("2d");t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,a.width,a.height),t.fillStyle="#ffffff",t.fillRect(0,0,a.width,a.height),t.drawImage(d,0,0);var n=a.toDataURL("image/png"),i=t.getImageData(0,0,a.width,a.height);URL.revokeObjectURL(u),e({idx:r,pngData:i,pngDataUrl:n})},d.onerror=function(){n(new Error("Failed to load image for SVG element "+r))},d.src=u}))}function s(t){return v.apply(this,arguments)}function v(){return v=h(a().mark((function t(r){var e,n,u,d,h,c,f,s,v,g;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=new Date,n=[],u=i(r.entries()),t.prev=4,u.s();case 6:if((d=u.n()).done){t.next=14;break}return a=d.value,w=2,h=function(t){if(Array.isArray(t))return t}(a)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,a,i,o,u=[],d=!0,h=!1;try{if(i=(e=e.call(t)).next,0===r){if(Object(e)!==e)return;d=!1}else for(;!(d=(n=i.call(e)).done)&&(u.push(n.value),u.length!==r);d=!0);}catch(t){h=!0,a=t}finally{try{if(!d&&null!=e.return&&(o=e.return(),Object(o)!==o))return}finally{if(h)throw a}}return u}}(a,w)||o(a,w)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=h[0],f=h[1],t.next=10,l(f,c);case 10:s=t.sent,n.push(s);case 12:t.next=6;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(4),u.e(t.t0);case 19:return t.prev=19,u.f(),t.finish(19);case 22:return v=[],t.prev=23,t.next=26,Promise.all(n);case 26:v=t.sent,g=new Date,console.log("lcw time",g-e,v),t.next=34;break;case 31:t.prev=31,t.t1=t.catch(23),console.error("lcw Error processing SVG elements:",t.t1);case 34:return t.abrupt("return",v);case 35:case"end":return t.stop()}var a,w}),t,null,[[4,16,19,22],[23,31]])}))),v.apply(this,arguments)}window.onload=function(){c=document.querySelectorAll("svg.icon"),console.log("lcw onload testing",c,document.querySelectorAll("svg.icon"))},setTimeout((function(){s(c=document.querySelectorAll("svg.icon")).then((function(t){f=t})),console.log("lcw settimeout",c)}),3e3),chrome.runtime.onMessage.addListener(function(){var t=h(a().mark((function t(e,n,o){var u,d;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("lcw listener",e,n),"highlight"===e.type&&((d=new Image).src=e.payload,d.onload=h(a().mark((function t(){var e,n,h,l,v,g,w;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=document.createElement("canvas")).width=36,e.height=36,(n=e.getContext("2d")).setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.width,e.height),n.fillStyle="#ffffff",n.fillRect(0,0,e.width,e.height),n.drawImage(d,0,0),u=n.getImageData(0,0,e.width,e.height),h=e.toDataURL("image/png"),console.log("图片的imageData:",u,h,f),o({farewell:"goodbye"}),0!==f.length){t.next=17;break}return t.next=16,s(c);case 16:f=t.sent;case 17:console.log("lcw target",u),l=[],v=i(f);try{for(v.s();!(g=v.n()).done;)w=g.value,l.push(r()(w.pngData,u))}catch(t){v.e(t)}finally{v.f()}console.log("lcw ssim",l,r()(u,u));case 22:case"end":return t.stop()}}),t)})))),console.log("lcw pngDatas",{request:e,sender:n,pngDatas:f}),t.abrupt("return",!0);case 4:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}())})()})();